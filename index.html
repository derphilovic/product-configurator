<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Configurator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .product-display {
            flex: 1;
            min-width: 300px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .options-panel {
            flex: 1;
            min-width: 300px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .product-image {
            width: 100%;
            height: 300px;
            background-color: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        .product-image img {
            max-width: 100%;
            max-height: 100%;
        }
        .option-group {
            margin-bottom: 20px;
        }
        .option-group h3 {
            margin-top: 0;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .option-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .option-item {
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option-item:hover {
            background-color: #f9f9f9;
        }
        .option-item.selected {
            background-color: #e6f7ff;
            border-color: #1890ff;
        }
        .addon-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .addon-item:hover {
            background-color: #f9f9f9;
        }
        .addon-item input {
            margin-right: 10px;
        }
        .summary {
            margin-top: 20px;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        .price {
            font-size: 24px;
            font-weight: bold;
            color: #1890ff;
        }
        button {
            background-color: #1890ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
        button:hover {
            background-color: #0c7cd5;
        }
        /* Cart styles */
        .cart-container {
            width: 100%;
            margin-top: 30px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .cart-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-item-details {
            flex: 1;
        }
        .cart-item-price {
            font-weight: bold;
            margin-left: 20px;
        }
        .cart-total {
            margin-top: 20px;
            text-align: right;
            font-size: 20px;
            font-weight: bold;
        }
        .cart-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }
        .remove-item {
            background-color: #ff4d4f;
            margin-left: 10px;
        }
        .remove-item:hover {
            background-color: #ff1f1f;
        }
        .empty-cart-message {
            text-align: center;
            padding: 20px;
            color: #999;
        }
        .addon-images {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        .addon-image {
            width: 80px;
            height: 80px;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px;
            object-fit: contain;
        }
        .addon-image-container {
            position: relative;
        }
        .addon-name {
            font-size: 12px;
            text-align: center;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="product-display">
            <h2>Product Preview</h2>
            <div class="product-image" id="product-image">
                <img id="main-product-img" src="" alt="Select a product">
            </div>
            <div class="addon-images" id="addon-images-container">
                <!-- Addon images will be added here dynamically -->
            </div>
            <div class="summary">
                <h3>Configuration Summary</h3>
                <div id="summary-content">
                    <p>Please select a base product to start.</p>
                </div>
                <div class="price">Total: $<span id="total-price">0.00</span></div>
                <button id="add-to-cart">Add to Cart</button>
            </div>
        </div>
        
        <div class="options-panel">
            <h2>Configure Your Product</h2>
            
            <div class="option-group">
                <h3>Select Base Product</h3>
                <div class="option-items" id="base-products">
                    <div class="option-item" data-product="laptop" data-price="999.99" data-image="images/a_main.png">
                        <h4>Laptop</h4>
                        <p>Basic model with 8GB RAM, 256GB SSD</p>
                        <p>$999.99</p>
                    </div>
                    <div class="option-item" data-product="desktop" data-price="1299.99" data-image="images/b_main.png">
                        <h4>Desktop</h4>
                        <p>Standard tower with 16GB RAM, 512GB SSD</p>
                        <p>$1299.99</p>
                    </div>
                    <div class="option-item" data-product="tablet" data-price="499.99" data-image="images/c_main.png">
                        <h4>Tablet</h4>
                        <p>10-inch display, 64GB storage</p>
                        <p>$499.99</p>
                    </div>
                </div>
            </div>
            
            <div class="option-group" id="addons-container" style="display: none;">
                <h3>Available Add-ons</h3>
                <div id="addons">
                    <!-- Laptop addons -->
                    <div class="addon-group" data-for="laptop">
                        <div class="addon-item">
                            <input type="checkbox" id="laptop-ram" data-price="100" data-image="images/a_addon_1.png">
                            <label for="laptop-ram">Upgrade to 16GB RAM (+$100)</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="laptop-ssd" data-price="150" data-image="images/a_addon_2.png">
                            <label for="laptop-ssd">Upgrade to 512GB SSD (+$150)</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="laptop-warranty" data-price="199" data-image="images/a_addon_3.png">
                            <label for="laptop-warranty">Extended 3-year warranty (+$199)</label>
                        </div>
                    </div>
                    
                    <!-- Desktop addons -->
                    <div class="addon-group" data-for="desktop">
                        <div class="addon-item">
                            <input type="checkbox" id="desktop-ram" data-price="120" data-image="images/b_addon_1.jpg">
                            <label for="desktop-ram">Upgrade to 32GB RAM (+$120)</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="desktop-gpu" data-price="350" data-image="images/b_addon_2.jpg">
                            <label for="desktop-gpu">Add dedicated GPU (+$350)</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="desktop-cooling" data-price="85" data-image="images/b_addon_3.jpg">
                            <label for="desktop-cooling">Liquid cooling system (+$85)</label>
                        </div>
                    </div>
                    
                    <!-- Tablet addons -->
                    <div class="addon-group" data-for="tablet">
                        <div class="addon-item">
                            <input type="checkbox" id="tablet-storage" data-price="100" data-image="images/c_addon_1.jpg">
                            <label for="tablet-storage">Upgrade to 128GB storage (+$100)</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="tablet-keyboard" data-price="129" data-image="images/c_addon_2.jpg">
                            <label for="tablet-keyboard">Add keyboard case (+$129)</label>
                        </div>
                        <div class="addon-item">
                            <input type="checkbox" id="tablet-pen" data-price="79" data-image="images/c_addon_3.jpg">
                            <label for="tablet-pen">Add stylus pen (+$79)</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Cart section -->
        <div class="cart-container">
            <h2>Shopping Cart</h2>
            <div id="cart-items">
                <div class="empty-cart-message">Your cart is empty</div>
            </div>
            <div class="cart-total">Total: $<span id="cart-total-price">0.00</span></div>
            <div class="cart-actions">
                <button id="clear-cart">Clear Cart</button>
                <button id="checkout">Checkout</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Variables to track the current configuration
            let selectedProduct = null;
            let selectedAddons = [];
            let basePrice = 0;
            let cart = [];
            
            // Get DOM elements
            const baseProducts = document.querySelectorAll('#base-products .option-item');
            const addonContainer = document.getElementById('addons-container');
            const addonGroups = document.querySelectorAll('.addon-group');
            const totalPriceElement = document.getElementById('total-price');
            const summaryContent = document.getElementById('summary-content');
            const productImage = document.getElementById('main-product-img');
            const addToCartButton = document.getElementById('add-to-cart');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalPrice = document.getElementById('cart-total-price');
            const clearCartButton = document.getElementById('clear-cart');
            const checkoutButton = document.getElementById('checkout');
            
            // Add event listeners to base products
            baseProducts.forEach(product => {
                product.addEventListener('click', function() {
                    // Remove selected class from all products
                    baseProducts.forEach(p => p.classList.remove('selected'));
                    
                    // Add selected class to clicked product
                    this.classList.add('selected');
                    
                    // Update selected product and base price
                    selectedProduct = this.dataset.product;
                    basePrice = parseFloat(this.dataset.price);
                    
                    // Update product image
                    productImage.src = this.dataset.image;
                    productImage.alt = selectedProduct;
                    
                    // Show addon container
                    addonContainer.style.display = 'block';
                    
                    // Hide all addon groups and show only the relevant one
                    addonGroups.forEach(group => {
                        group.style.display = 'none';
                        if (group.dataset.for === selectedProduct) {
                            group.style.display = 'block';
                        }
                    });
                    
                    // Reset addons
                    resetAddons();
                    
                    // Update summary and price
                    updateSummary();
                    updateProductImage();
                });
            });
            
            // Add event listeners to addon checkboxes
            const addonCheckboxes = document.querySelectorAll('.addon-item input[type="checkbox"]');
            addonCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateSummary();
                    updateProductImage();
                });
            });
            
            // Add to cart button
            addToCartButton.addEventListener('click', function() {
                if (!selectedProduct) {
                    alert('Please select a product first!');
                    return;
                }
                
                // Get selected product details
                const productElement = document.querySelector(`#base-products .option-item[data-product="${selectedProduct}"]`);
                const productName = productElement.querySelector('h4').textContent;
                
                // Create cart item
                const cartItem = {
                    id: Date.now(), // Unique ID for the cart item
                    product: selectedProduct,
                    productName: productName,
                    basePrice: basePrice,
                    addons: [...selectedAddons], // Create a copy of selected addons
                    totalPrice: parseFloat(totalPriceElement.textContent)
                };
                
                // Add to cart
                cart.push(cartItem);
                
                // Update cart display
                updateCartDisplay();
                
                alert('Product added to cart!');
            });
            
            // Clear cart button
            clearCartButton.addEventListener('click', function() {
                cart = [];
                updateCartDisplay();
            });
            
            // Checkout button
            checkoutButton.addEventListener('click', function() {
                if (cart.length === 0) {
                    alert('Your cart is empty!');
                    return;
                }
                
                alert('Proceeding to checkout...');
                // Here you would typically redirect to a checkout page
            });
            
            // Function to reset addons
            function resetAddons() {
                addonCheckboxes.forEach(checkbox => {
                    checkbox.checked = false;
                });
                selectedAddons = [];
            }
            
            // Function to reset the entire selection
            function resetSelection() {
                baseProducts.forEach(p => p.classList.remove('selected'));
                selectedProduct = null;
                basePrice = 0;
                resetAddons();
                addonContainer.style.display = 'none';
                productImage.src = '';
                productImage.alt = 'Select a product';
                updateSummary();
            }
            
            // Function to update summary and price
            function updateSummary() {
                if (!selectedProduct) {
                    summaryContent.innerHTML = '<p>Please select a base product to start.</p>';
                    totalPriceElement.textContent = '0.00';
                    return;
                }
                
                // Get selected product name
                const productElement = document.querySelector(`#base-products .option-item[data-product="${selectedProduct}"]`);
                const productName = productElement.querySelector('h4').textContent;
                
                // Calculate total price
                let totalPrice = basePrice;
                
                // Build summary HTML
                let summaryHTML = `<p><strong>Base Product:</strong> ${productName} - $${basePrice.toFixed(2)}</p>`;
                
                // Get selected addons
                selectedAddons = [];
                const relevantAddons = document.querySelectorAll(`.addon-group[data-for="${selectedProduct}"] .addon-item input:checked`);
                
                if (relevantAddons.length > 0) {
                    summaryHTML += '<p><strong>Add-ons:</strong></p><ul>';
                    
                    relevantAddons.forEach(addon => {
                        const addonPrice = parseFloat(addon.dataset.price);
                        const addonName = addon.nextElementSibling.textContent.split('(+')[0].trim();
                        
                        selectedAddons.push({
                            name: addonName,
                            price: addonPrice
                        });
                        
                        totalPrice += addonPrice;
                        summaryHTML += `<li>${addonName} - $${addonPrice.toFixed(2)}</li>`;
                    });
                    
                    summaryHTML += '</ul>';
                }
                
                // Update summary content and total price
                summaryContent.innerHTML = summaryHTML;
                totalPriceElement.textContent = totalPrice.toFixed(2);
            }
            
            // Function to update cart display
            function updateCartDisplay() {
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<div class="empty-cart-message">Your cart is empty</div>';
                    cartTotalPrice.textContent = '0.00';
                    return;
                }
                
                let cartHTML = '';
                let cartTotal = 0;
                
                cart.forEach(item => {
                    cartHTML += `
                        <div class="cart-item" data-id="${item.id}">
                            <div class="cart-item-details">
                                <h4>${item.productName}</h4>
                                <p>Base price: $${item.basePrice.toFixed(2)}</p>
                                ${item.addons.length > 0 ? '<p>Add-ons:</p><ul>' + 
                                    item.addons.map(addon => `<li>${addon.name} - $${addon.price.toFixed(2)}</li>`).join('') + 
                                    '</ul>' : ''}
                            </div>
                            <div class="cart-item-price">$${item.totalPrice.toFixed(2)}</div>
                            <button class="remove-item" onclick="removeCartItem(${item.id})">Remove</button>
                        </div>
                    `;
                    cartTotal += item.totalPrice;
                });
                
                cartItemsContainer.innerHTML = cartHTML;
                cartTotalPrice.textContent = cartTotal.toFixed(2);
            }

            // Add this function to handle removing items from cart
            function removeCartItem(itemId) {
                cart = cart.filter(item => item.id !== itemId);
                updateCartDisplay();
            }

            // Add this function to the existing script section
            function updateProductImage() {
                if (!selectedProduct) return;
                
                // Get the base product image
                const productElement = document.querySelector(`#base-products .option-item[data-product="${selectedProduct}"]`);
                let mainImageSrc = productElement.dataset.image;
                
                // Update the main product image
                productImage.src = mainImageSrc;
                productImage.alt = selectedProduct;
                
                // Get the addon images container
                const addonImagesContainer = document.getElementById('addon-images-container');
                addonImagesContainer.innerHTML = ''; // Clear previous addon images
                
                // Check for selected addons
                const selectedAddonCheckboxes = document.querySelectorAll(`.addon-group[data-for="${selectedProduct}"] .addon-item input:checked`);
                
                if (selectedAddonCheckboxes.length > 0) {
                    selectedAddonCheckboxes.forEach(addon => {
                        if (addon.dataset.image) {
                            const addonContainer = document.createElement('div');
                            addonContainer.className = 'addon-image-container';
                            
                            const addonImg = document.createElement('img');
                            addonImg.src = addon.dataset.image;
                            addonImg.className = 'addon-image';
                            addonImg.alt = addon.nextElementSibling.textContent.split('(+')[0].trim();
                            
                            const addonName = document.createElement('div');
                            addonName.className = 'addon-name';
                            addonName.textContent = addon.nextElementSibling.textContent.split('(+')[0].trim();
                            
                            addonContainer.appendChild(addonImg);
                            addonContainer.appendChild(addonName);
                            addonImagesContainer.appendChild(addonContainer);
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>